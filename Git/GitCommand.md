# 깃 명령어 정리

## 버전 관리

### 깃 상태 확인
- `git status`
<br>

### 파일 스테이징
- `git add`
- `git add .`하면 수정한 모든 파일을 스테이지에 올릴 수 있다. 주의해서 써야한다.
<br>

### 스테이지에 올라온 파일 커밋
- `git commit`
- -m 옵션으로 메세지랑 같이 커밋할 수 있다.
<br>

### 커밋 기록 보기(log 확인)
- `git log`
- -oneline 옵션으로 간략히 볼 수 있다.
- --stat 옵션을 사용하면 최근 커밋부터 커밋 메세지와 관련 파일이 나열된다.
<br>

### 스테이징과 커밋 한번에 처리하기
- `git commit -am`
- 한 번이라도 이미 커밋한 파일만 가능하다.
<br>

### 변경 사항 확인하기
- `git diff`
<br>

### 버전 관리에서 제외하기
- vim을 사용해서 .gitignore 파일을 만들고 그 안에 버전 관리하지 않을 파일 또는 디렉터리 이름이나 파일 확장자를 입력하면 된다.
<br>

### 방금 커밋한 커밋 메시지 수정하기
- `git commit --amend`
<br>

## 작업 되돌리기

### 스테이지에 올리기전에 되돌리기
- `git checkout`
- ex) `git checkout -- hello.txt`
<br>

### 스테이지에 올린 후 되돌리기
- `git reset HEAD 파일 이름`
- ex) `git reset HEAD hello.txt`
<br>

### 커밋까지 한 경우, 최신 커밋 되돌리기
- `git reset HEAD^`
- 커밋을 취소하면 스테이징도 함께 취소된다.

|  <center>명령</center> |  <center>설명</center> |
|:--------|:--------|
|--soft HEAD^ | 최근 커밋을 하기 전 상태로 작업 트리를 되돌린다.|
|--mixed HEAD^ | 최근 커밋과 스테이징을 하기 전 상태로 작업트리를 되돌린다. <br> 옵션 없이 git reset 명령을 사용하면 이 옵션을 기본으로 동작한다.|
|--hard HEAD^ | 최근 커밋과 스테이징, 파일 수정을 하기 전 상태로 작업트리를 되돌린다. <br> 이 옵션으로 되돌린 내용은 복구할 수 없다.|
<br>

### 특정 커밋으로 되돌리기 - git reset 커밋 해시
- `git reset --hard 커밋 해시`
- 특정 커밋까지 리셋하는 것이 아니라 최근 커밋을 특정 커밋으로 이동하는 것이다.
<br>

### 커밋 삭제하지 않고 되돌리기 - git revert
- `git revert 커밋 해시`
- 파일은 되돌려지지만 커밋 내용이 지워지지 않고 변경 이력이 추가된다.
<br>

## 깃과 브랜치

### 브랜치 확인
- `git branch`
<br>

### 브랜치 생성
- `git branch 브랜치 이름`
<br>

### 브랜치 이동
- `git checkout 브랜치 이름`
<br>

### 각 브랜치의 커밋 확인
- `git log --oneline --branches`
- 그래프 형태로 표시하려면 `git log --oneline --branches --graph`
<br>

### 브랜치 사이의 차이 확인
- `git log 브랜치이름..브랜치이름`
- 왼쪽 브랜치를 기준으로 오른쪽 브랜치에만 있는 커밋들을 보여준다.
- ex) `git log master..apple`
<br>

### 브랜치 병합
- `git merge master로 가져올 브랜치 이름`
- 브랜치를 병합할 때는 반드시 master로 브랜치를 이동시켜서 병합시켜야한다.
- ex) `git merge o2`
<br>

### 같은 문서의 다른 위치를 수정했을 때 병합하기
- 두 브랜치의 수정 내용이 자연스럽게 하나의 파일에 합쳐진다.
<br>

### 같은 문서의 같은 위치를 수정했을 때 병합하기
- 깃에서는 줄 단위로 변경 여부를 확인하고, 같은 줄을 수정했을 때 브랜치를 병합하면 브랜치 충돌이 발생한다.
- 만약 merge 명령을 실행하면 충돌했다는 메세지가 나타나고 문서에는 두 수정내용들이 모두 설명되어 있어 사용자가 원하는대로 수정해야한다.
- 여러 개의 파일을 병합했다면 충돌이 발생한 파일 외에 다른 파일들은 자동으로 master 브랜치에 병합된다.
<br>

### 병합이 끝난 브랜치 삭제하기
- `git branch -d 브랜치 이름`
- 브랜치를 삭제하려면 master 브랜치에서 해야 한다.
- 브랜치를 완전히 삭제하는 것이 아니라 깃의 흐름 속에서 감추는 것이다.
- 같은 이름으로 브랜치를 다시 만들면 전의 작업 내용이 그대로 나타난다.
<br>

### 브랜치와 checkout, reset
- `git checkout` 명령은 HEAD가 가리키는 것을 제어하여 브랜치를 이동할 수 있다.
- `git reset`은 특정 커밋으로 되돌아 갈 수 있고, 브랜치가 여러 개일 경우 현재 브랜치가 아닌 다른 브랜치에 있는 커밋을 골라서 최신 커밋으로 지정할 수도 있다.
    * 어떤 브랜치에 있는 커밋이든 지정할 수 있으며, 명령을 수행한 뒤 브랜치와 연결이 끊긴 커밋은 삭제된다.
<br>

### 수정 중인 파일 감추기 및 되돌리기 - git stash
- `git stash` 명령을 사용하려면 파일이 tracked(한 번이라도 커밋한) 상태여야 한다.
- `git stash` 명령을 사용하면 수정은 했지만 커밋을 나중에 하고 싶을 때 잠시 어딘가에 보관(숨길) 할 수 있다.
- `git stash list` 명령을 사용하면 감춘 파일들의 목록을 확인할 수 있다.
    * 가장 최근 감춘 것은 stash@{0}에 들어있고 파일이 추가되면 stash@{1}로 옮겨지며 순서가 밀린다.(stack)
- 감춰둔 파일을 꺼내와서 수정하거나 커밋하려면 `git stash pop` 명령을 사용한다.
    * 가장 최근 항목을 되돌린다.
- `git stash drop` 명령은 stash list에서 가장 최근 항목을 삭제한다.
<br>

## 깃허브로 협업하기

### 원격 저장소 복제하기 - git clone
- 원격 저장소를 기존에 연결된 지역 저장소 외에 다른 지역 저장소에 복제하고싶을 때 사용한다.
- `git clone 복사한_주소 디렉터리_이름`
    * 디렉터리 이름이 없으면 자동으로 만들어진다. 
    * 현재 디렉터리에 복제하려면 디렉터리 이름 대신 마침표(.)를 사용하면 된다.
- 자신의 계정의 원격 저장소를 복제하면 자동으로 지역 저장소와 원격 저장소가 연결된다.
    * `git remote -v` 명령을 사용해 확인할 수 있다.
<br>

### 원격 브랜치 정보 가져오기 - git fetch
- `git pull` 명령이 원격 저장소의 커밋을 가져와서 무조건 지역 저장소와 합친다면, `git fetch` 명령은 원격 브랜치에 어떤 변확 있는지 정보만 가져온다.
- 원격 브랜치 정보를 가져오면 FETCH_HEAD라는 브랜치로 가져온다. (`git checkout FETCH_HEAD`)
- fetch한 후에 최신 커밋을 현재 브랜치에 합치려면 `git pull`, FETCH_HEAD에 있던 커밋을 병합하려면 `git merge`를 사용한다.
- 즉 `git pull` 명령은 `git fetch`와 `git merge FETCH_HEAD`를 합친 기능이다.
<br>